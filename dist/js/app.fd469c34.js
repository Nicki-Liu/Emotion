(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],p=0,f=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"3dea":function(t,e,n){"use strict";var a=n("961c"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=n("8c4f"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"}},[n("MessageBoard")],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"message-board"}},[n("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[n("el-main",[n("img",{attrs:{src:t.imageSrc}})]),n("el-footer",{staticStyle:{"text-align":"center","font-size":"10px"}},[n("el-button",{staticClass:"press-button",staticStyle:{display:"inline-block","margin-right":"15px"},on:{click:function(e){return t.nextPicture(1)}}},[n("i",{staticClass:"el-icon-sunny"},[t._v("积极")])]),n("el-button",{staticClass:"press-button",staticStyle:{display:"inline-block","margin-right":"15px"},on:{click:function(e){return t.nextPicture(2)}}},[n("i",{staticClass:"el-icon-cloudy",staticStyle:{"object-fit":"fill"}},[t._v("中性")])]),n("el-button",{staticClass:"press-button",staticStyle:{display:"inline-block","margin-right":"15px"},on:{click:function(e){return t.nextPicture(3)}}},[n("i",{staticClass:"el-icon-heavy-rain",staticStyle:{"object-fit":"fill"}},[t._v("消极")])])],1)],1)],1)},l=[],c={name:"MessageBoard",components:{},data:function(){return{imageSrc:n("65b3"),images:["cuteIcon","logo","加油"],currentImgID:0,messageList:[]}},methods:{visibleAndFill:function(){this.postDialog.dialogVisible=!0,this.state.username_valid=!1;var t=this.$cookieStore.getCookie();t?(this.state.username=t,this.state.username_valid=!0):this.state.username=""},getCurrentImgSrc:function(){this.imageSrc=n("9e01")("./"+this.images[this.currentImgID]+".png")},nextPicture:function(t){this.currentImgID<this.images.length-1&&0<t?this.currentImgID+=1:this.currentImgID=0,this.getCurrentImgSrc()},appendBlock:function(t){var e=this,n=36e5;this.$cookieStore.setCookie(t.user,n),this.alertDialog.dialogVisible=!1,this.$post({title:t.title,content:t.content}).then((function(t){e.alertDialog.dialogVisible=!0,console.log(t),e.refresh()})),this.postDialog.dialogVisible=!1},refresh:function(){var t=this;this.$get().then((function(e){for(var n in t.messageList=[],e.data){var a=1e3*e.data[n].timestamp;e.data[n].timestamp=a,t.messageList.push(e.data[n])}t.messageList.reverse()}))}}},u=c,p=(n("85ba"),n("2877")),f=Object(p["a"])(u,r,l,!1,null,"3fae8b92",null),m=f.exports,d={name:"Home",components:{MessageBoard:m}},g=d,h=Object(p["a"])(g,s,o,!1,null,null,null),b=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"stage1"}},[n("MessageBlock")],1)},y=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticStyle:{background:"#b0c7e7","border-radius":"4px",margin:"5px"},attrs:{"default-openeds":[]}},[n("el-submenu",{staticStyle:{"text-align":"left"},attrs:{index:"view"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-chat-square"}),n("span",{staticClass:"messageblock-title"},[t._v(t._s(t.title))])]),n("div",{staticStyle:{display:"flex","margin-top":"3px","font-size":"small",color:"grey"}},[n("span",{staticClass:"messageblock-datetime",staticStyle:{padding:"4px"}},[t._v(" "+t._s(t.datetime)+" ")]),n("span",{staticClass:"messageblock-user",staticStyle:{padding:"4px"}},[t._v(t._s(t.user))])]),n("div",{staticClass:"messageblock-content"},[t._v(t._s(t.content))])],2)],1)},S=[],x=(n("a9e3"),{name:"MessageBlock",props:{title:{type:String,default:function(){return"unknown title"}},content:{type:String,default:function(){return"unknown content"}},user:{type:String,default:function(){return"unknown user"}},timestamp:{type:Number,default:function(){return 0}}},computed:{datetime:function(){var t=new Date;return t.setTime(this.timestamp),t.toLocaleString()}}}),k=x,w=(n("3dea"),Object(p["a"])(k,_,S,!1,null,"fd6ee438",null)),O=w.exports,M={name:"Stage1",components:{MessageBlock:O}},E=M,$=Object(p["a"])(E,v,y,!1,null,null,null),j=$.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"stage2"}},[n("MessageList")],1)},C=[],I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"message-list"}},t._l(t.messageList,(function(t){return n("MessageBlock",{key:t,attrs:{title:t.title,user:t.user,content:t.content,timestamp:t.timestamp}})})),1)},L=[],P=(n("cb29"),{name:"MessageList",components:{MessageBlock:O},props:{messageList:{type:Array,default:function(){return new Array(5).fill({title:"Hello",content:"Hello World!",user:"unknown",timestamp:(new Date).getTime()})}}}}),T=P,V=Object(p["a"])(T,I,L,!1,null,null,null),B=V.exports,A={name:"Stage2",components:{MessageList:B}},G=A,W=Object(p["a"])(G,D,C,!1,null,null,null),H=W.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"stage3"}},[n("MessageList",{attrs:{messageList:t.messageList}}),n("PostDialog",{attrs:{dialogVisible:t.dialogVisible},on:{newMember:t.appendBlock,WITHDRAW:function(e){t.dialogVisible=!1}}})],1)},z=[],R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"发表",visible:t.dialogVisible,"show-close":!1,"close-on-click-model":!1,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{placeholder:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[t._v("title")])],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea",placeholder:"message"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:t.state.username,callback:function(e){t.$set(t.state,"username",e)},expression:"state.username"}}),!1===t.state.username_valid?n("span",{staticStyle:{color:"red"}},[t._v("请设置合法用户名!")]):t._e()],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.withdraw}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary",disabled:!1===t.state.username_valid},on:{click:t.ensure}},[t._v("确 定")])],1)],1)},F=[],J={name:"PostDialog",props:{dialogVisible:{type:Boolean,default:function(){return!0}},state:{type:Object,default:function(){return{username:"",username_valid:!1}}}},data:function(){return{title:"",content:"",user:this.state.username}},methods:{ensure:function(t){t&&this.state.username_valid&&(this.dialogVisible=!1),this.$emit("newMember",{title:this.title,content:this.content,user:this.state.username,timestamp:(new Date).getTime()}),this.title="",this.content=""},withdraw:function(t){t&&(this.dialogVisible=!1),this.$emit("WITHDRAW"),this.title="",this.content=""}},watch:{"state.username":{handler:function(t){this.state.username_valid=/^[A-Za-z\u4e00-\u9fa5][-A-Za-z0-9\u4e00-\u9fa5_]*$/.test(t)}}}},U=J,Z=Object(p["a"])(U,R,F,!1,null,null,null),q=Z.exports,K={name:"Stage3",components:{MessageList:B,PostDialog:q},data:function(){return{messageList:[],dialogVisible:!0}},methods:{appendBlock:function(t){this.messageList.push(t),this.dialogVisible=!1}}},Q=K,X=Object(p["a"])(Q,N,z,!1,null,null,null),Y=X.exports;a["default"].use(i["a"]);var tt=[{path:"/",name:"Home",component:b},{path:"/stage1",name:"Stage1",component:j},{path:"/stage2",name:"Stage2",component:H},{path:"/stage3",name:"Stage3",component:Y}],et=new i["a"]({mode:"history",routes:tt}),nt=et,at=n("5c96"),it=n.n(at),st=n("bc3a"),ot=n.n(st),rt=n("a7fe"),lt=n.n(rt),ct=(n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),{GET_MESSAGE_LIST:{path:"/api/message",method:"get"},POST_NEW_MESSAGE:{path:"/api/message",method:"post"}}),ut=ct;function pt(t,e){var n=new Date;n.setDate(n.getDate()+e),document.cookie="user="+t+(null==e?"":";expires="+n.toGMTString())}function ft(){var t,e=new RegExp("(^| )user=([^;]*)(;|$)");return t=document.cookie.match(e),t?t[2]:null}function mt(){return new Promise((function(t,e){ot.a.get(ut.GET_MESSAGE_LIST.path).then((function(e){t(e.data)})).catch((function(t){e(t)}))}))}function dt(t){return new Promise((function(e,n){ot.a.post(ut.POST_NEW_MESSAGE.path,t).then((function(t){e(t.data)}),(function(t){n(t)}))}))}n("0fae");var gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},ht=[],bt=(n("034f"),{}),vt=Object(p["a"])(bt,gt,ht,!1,null,null,null),yt=vt.exports;a["default"].use(it.a),a["default"].config.productionTip=!1,a["default"].use(lt.a,ot.a),a["default"].prototype.$axios=ot.a,a["default"].prototype.$cookieStore={setCookie:pt,getCookie:ft},a["default"].prototype.$get=mt,a["default"].prototype.$post=dt,new a["default"]({router:nt,render:function(t){return t(yt)}}).$mount("#app")},"59a2":function(t,e,n){t.exports=n.p+"img/加油.1ef4ba78.png"},"65b3":function(t,e,n){t.exports=n.p+"img/cuteIcon.a01f2eba.png"},"85ba":function(t,e,n){"use strict";var a=n("8926"),i=n.n(a);i.a},"85ec":function(t,e,n){},8926:function(t,e,n){},"961c":function(t,e,n){},"9e01":function(t,e,n){var a={"./cuteIcon.png":"65b3","./logo.png":"cf05","./加油.png":"59a2"};function i(t){var e=s(t);return n(e)}function s(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=s,t.exports=i,i.id="9e01"},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.fd469c34.js.map